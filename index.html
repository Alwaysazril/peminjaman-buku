<body>
    <div style="max-width: 600px; margin: auto;">
        <h2>ðŸ“š Data Perpustakaan Online</h2>
        
        <form action="/pinjam" method="POST" style="background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
            <input type="text" name="nama" placeholder="Nama Peminjam" required style="width: 100%; margin-bottom: 10px; padding: 8px;">
            <input type="text" name="buku" placeholder="Judul Buku" required style="width: 100%; margin-bottom: 10px; padding: 8px;">
            <button type="submit" style="width: 100%; background: #4CAF50; color: white; border: none; padding: 10px; cursor: pointer;">Tambah Pinjaman</button>
        </form>

        <h3 style="margin-top: 30px;">Daftar Peminjaman</h3>
        <table border="1" style="width: 100%; border-collapse: collapse; background: white;">
            <thead>
                <tr style="background: #eee;">
                    <th style="padding: 10px;">Data Peminjaman</th>
                    <th style="padding: 10px;">Aksi</th>
                </tr>
            </thead>
            <tbody id="listData">
                </tbody>
        </table>
    </div>

    <script>
        fetch('/data')
            .then(res => res.text())
            .then(data => {
                const tbody = document.getElementById('listData');
                const lines = data.split('\n').filter(l => l.trim() !== '');
                
                if (lines.length === 0) {
                    tbody.innerHTML = '<tr><td colspan="2" style="text-align:center; padding:10px;">Belum ada data</td></tr>';
                    return;
                }

                tbody.innerHTML = lines.map((line, index) => `
                    <tr>
                        <td style="padding: 10px;">${line}</td>
                        <td style="padding: 10px; text-align: center;">
                            <form action="/hapus" method="POST" style="margin:0">
                                <input type="hidden" name="index" value="${index}">
                                <button type="submit" style="background: #ff4d4d; color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer;">Hapus</button>
                            </form>
                        </td>
                    </tr>
                `).join('');
            });
    </script>
</body>
